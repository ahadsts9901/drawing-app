<!DOCTYPE html>
<html>

<head>
    <title>Drawing App</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>
    <button onclick="setShape('rectangle')">Rectangle</button>
    <button onclick="setShape('circle')">Circle</button>
    <button onclick="setShape('triangle')">Triangle</button>
    <script>
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let currentShape = null;
        let startPoint = null;

        canvas.addEventListener('mousedown', (event) => {
            isDrawing = true;
            [lastX, lastY] = [event.clientX, event.clientY];
            startPoint = [event.clientX, event.clientY];
        });

        canvas.addEventListener('mousemove', (event) => {
            if (isDrawing) {
                if (currentShape) {
                    drawShape(startPoint[0], startPoint[1], event.clientX, event.clientY, currentShape);
                } else {
                    const x = event.clientX;
                    const y = event.clientY;
                    context.beginPath();
                    context.moveTo(lastX, lastY);
                    context.lineTo(x, y);
                    context.stroke();
                    [lastX, lastY] = [x, y];
                }
            }
        });

        canvas.addEventListener('mouseup', () => {
            isDrawing = false;
            startPoint = null;
        });

        canvas.addEventListener('mouseout', () => {
            isDrawing = false;
            startPoint = null;
        });

        function setShape(shape) {
            currentShape = shape;
        }

        function drawShape(x1, y1, x2, y2, shape) {
            context.beginPath();
            if (shape === 'rectangle') {
                const width = x2 - x1;
                const height = y2 - y1;
                context.rect(x1, y1, width, height);
            } else if (shape === 'circle') {
                const radius = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                context.arc(x1, y1, radius, 0, 2 * Math.PI);
            } else if (shape === 'triangle') {
                const width = x2 - x1;
                const height = y2 - y1;
                context.moveTo(x1, y1);
                context.lineTo(x1 + width, y1);
                context.lineTo(x1 + (width / 2), y1 - height);
                context.closePath();
            }
            context.stroke();
        }
    </script>
</body>

</html>